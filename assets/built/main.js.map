{"version":3,"sources":["main.js"],"names":["body","numberOfPatterns","ghostSearch","menuMouse","searchButtonEl","searchModalEl","searchWrapperEl","searchInputEl","searchResultsEl","resultsEmptyEl","menuButtonEl","dark","ext","action","stripe","index","carouselContainer","document","querySelector","rand","Math","ceil","random","style","backgroundImage","noImagePosts","querySelectorAll","length","post","carousel","$","noImageCarousel","container","on","s","setTimeout","this","opacity","bind","target","slick","slickConf","events","hotkeys","filter","event","handler","preventDefault","classList","remove","buttons","addEventListener","toggleSearch","e","stopPropagation","contains","toggle","search","ghostsearch_key","ghostsearch_url","display","GhostSearch","input","trigger","results","key","url","template","result","location","protocol","host","join","slug","title","beforeDisplay","afterDisplay","inputEl","getElementById","resultsEl","value","add","last","lastElementChild","changeSelectedMenu","total","createElement","innerHTML","appendChild","beforeFetch","afterFetch","searchOpened","selected","click","focus","childNodes","blur","window","ready","getParameterByName"],"mappings":"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","file":"main.js","sourcesContent":["var body;\n\nvar numberOfPatterns;\n\nvar ghostSearch;\nvar menuMouse;\n\nvar searchButtonEl;\nvar searchModalEl;\nvar searchWrapperEl;\nvar searchInputEl;\nvar searchResultsEl;\nvar resultsEmptyEl;\n\nvar menuButtonEl;\n\nlet dark;\nlet ext;\n\nvar action;\nvar stripe;\n\n$(document).ready(function() {\n\tbody = document.body;\n\n\tnumberOfPatterns = 5;\n\n\tghostSearch;\n\tmenuMouse = true;\n\n\tsearchButtonEl = document.querySelector(\".site-search\");\n\tsearchModalEl = document.querySelector(\".search-modal\");\n\tsearchWrapperEl = document.querySelector(\".search-wrapper\");\n\tsearchInputEl = document.getElementById(\"search-input\");\n\tsearchResultsEl = document.getElementById(\"results-container\");\n\tresultsEmptyEl = document.querySelector(\".results-empty\");\n\n\tmenuButtonEl = document.querySelector(\".site-menu\");\n\n\taction = getParameterByName('action');\n\tstripe = getParameterByName('stripe');\n\n\tdark = body.classList.contains(\"dark\");\n\text = dark ? \"d.png\" : \".png\";\n\n\tindex();\n\tevents();\n\tbuttons();\n\tcarousel();\n\tsearch();\n});\n\nfunction index() {\n\n\tlet carouselContainer = document.querySelector(\".carousel-container\");\n\tif(carouselContainer) {\n\t\tlet rand = Math.ceil(Math.random() * numberOfPatterns);\n\t\tcarouselContainer.style.backgroundImage = \"url(/assets/images/patterns/\" + rand + ext;\n\t}\n\n\tlet noImagePosts = document.querySelectorAll(\"a.no-image\");\n\tif(noImagePosts.length) {\n\t\tfor(let post of noImagePosts) {\n\t\t\tlet rand = Math.ceil(Math.random() * numberOfPatterns);\n\t\t\tpost.style.backgroundImage = \"url(/assets/images/patterns/\" + rand + ext;\n\t\t}\n\t}\n}\n\nfunction carousel() {\n\t$('.carousel-bg-image.no-image')\n\n\tlet noImageCarousel = document.querySelectorAll('.carousel-bg-image.no-image');\n\n\tif(noImageCarousel.length) {\n\t\tfor(let container of noImageCarousel) {\n\t\t\tlet rand = Math.ceil(Math.random() * 11);\n\t\t\tcontainer.style.backgroundImage = \"url(/assets/images/patterns/\" + rand + ext;\n\t\t}\n\t}\n\n\t$('.carousel').on('init', function(s){\n\t\tsetTimeout(function() {\n\t\t\tthis.style.opacity = \"1\";\n\t\t}.bind(s.target), 200);\n\t});\n\n\t$('.carousel').slick(slickConf);\n}\n\nfunction events() {\n\thotkeys.filter = function(event){\n\t\treturn true;\n\t}\n\n\thotkeys('esc', function(event, handler){\n\t\tevent.preventDefault()\n\n\t\tbody.classList.remove(\"menu-opened\");\n\t\tbody.classList.remove(\"search-opened\");\n\t});\n}\n\nfunction buttons() {\n\tsearchButtonEl.addEventListener(\"click\", function() {\n\t\ttoggleSearch();\n\t});\n\n\tsearchWrapperEl.addEventListener(\"click\", function(e) {\n\t\te.stopPropagation();\n\t});\n\n\tsearchModalEl.addEventListener(\"click\", function(e) {\n\t\tbody.classList.remove(\"search-opened\");\n\t}, false);\n\n\tbody.addEventListener(\"click\", function() {\n\t\tif(body.classList.contains(\"menu-opened\")) {\n\t\t\tbody.classList.remove(\"menu-opened\");\n\t\t}\n\t});\n\n\tmenuButtonEl.addEventListener(\"click\", function(e) {\n\t\te.stopPropagation();\n\t\ttoggle(\"menu-opened\");\n\t});\n}\n\nfunction search() {\n\tif (typeof ghostsearch_key !== 'undefined' && typeof ghostsearch_url !== 'undefined') {\n\n\t\tsearchButtonEl.style.display = \"inline-block\";\n\n\t\tghostSearch = new GhostSearch({\n\t\t\tinput: '#search-input',\n\t\t\ttrigger: 'focus',\n\t\t\tresults: '#results-container',\n\t\t\tkey: ghostsearch_key,\n\t\t\turl: ghostsearch_url,\n\t\t\ttemplate: function(result) {\n\t\t\t\tlet url = [location.protocol, '//', location.host].join('');\n\t\t\t\treturn '<a href=\"' + url + '/' + result.slug + '/\"' + ' class=\"search-item\"><span class=\"search-item-name\">' + result.title + '</span></a>';\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tbeforeDisplay: function(results) {\n\t\t\t\t},\n\t\t\t\tafterDisplay: function(results){\n\t\t\t\t\tlet inputEl = document.getElementById('search-input');\n\t\t\t\t\tlet resultsEl = document.getElementById('results-container');\n\n\t\t\t\t\tif(!(inputEl.value == \"\")) {\n\t\t\t\t\t\tsearchWrapperEl.classList.add(\"with-text\")\n\t\t\t\t\t\tresultsEmptyEl.style.display = \"none\";\n\t\t\t\t\t\tlet last = searchResultsEl.lastElementChild;\n\t\t\t\t\t\tif(last) {\n\t\t\t\t\t\t\tchangeSelectedMenu(last, false, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsearchWrapperEl.classList.remove(\"with-text\")\n\t\t\t\t\t\tresultsEmptyEl.style.display = \"block\";\n\t\t\t\t\t}\n\n\t\t\t\t\tif (results.total == 0 && inputEl.value != '') {\n\t\t\t\t\t\tlet e = document.createElement('div');\n\n\t\t\t\t\t\te.classList.add(\"search-item\");\n\t\t\t\t\t\te.classList.add(\"no-results\");\n\t\t\t\t\t\te.innerHTML = 'No results found';\n\n\t\t\t\t\t\tresultsEl.appendChild(e);\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tbeforeFetch: function() {\n\t\t\t\t},\n\t\t\t\tafterFetch: function() {\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\thotkeys('alt+s', function(event, handler){\n\t\t\tevent.preventDefault()\n\t\t\ttoggleSearch();\n\t\t});\n\n\t\thotkeys('enter', function(event, handler){\n\t\t\tlet searchOpened = body.classList.contains(\"search-opened\");\n\t\t\tlet selected = document.querySelector(\".selected\");\n\n\t\t\tif(searchOpened && selected) {\n\t\t\t\tselected.click();\n\t\t\t}\n\t\t});\n\n\t\thotkeys('backspace', function(event, handler){\n\t\t\tsearchInputEl.focus();\n\t\t});\n\n\t\thotkeys('up,down', function(event, handler){\n\t\t\tlet searchOpened = body.classList.contains(\"search-opened\");\n\t\t\tlet results = searchResultsEl.childNodes.length > 0;\n\n\t\t\tif(searchOpened && results) {\n\t\t\t\tevent.preventDefault()\n\n\t\t\t\tsearchInputEl.blur();\n\n\t\t\t\tmenuMouse = false;\n\n\t\t\t\tlet selected = document.querySelector(\".selected\");\n\n\t\t\t\tswitch (handler.key) {\n\t\t\t\t\tcase 'up':\n\t\t\t\t\t\tif(selected) {\n\t\t\t\t\t\t\tchangeSelectedMenu(selected, false, false);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsearchInputEl.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'down':\n\t\t\t\t\t\tif(selected) {\n\t\t\t\t\t\t\tchangeSelectedMenu(selected, false, true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsearchInputEl.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\twindow.addEventListener(\"beforeunload\", function() {\n\t\t\tsearchInputEl.value = \"\";\n\t\t});\n\t}\n}\n"]}